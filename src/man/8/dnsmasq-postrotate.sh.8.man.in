NAME
dnsmasq-postrotate.sh - postrotate script for dnsmasq
SYNOPSIS
dnsmasq-postrotate.sh [OPTION]
DESCRIPTION
Used as a postrotate script after logrotate has rotated logs. This script
requests the dnsmasq daemon to write summary stats to the syslog and requests it
to close and re-open it's log file which is necessary to start using the new log
file.

Other functionality is to setup the logrotate file with the correct location of
the dnsmasq log file.
OPTIONS
-h, --help  prints usage information

-p, --post-rotate  invoke the normal post rotate processing for dumping summary
stats and closing and re-opening the log file

-s, --setup  determine the location of the log file and write this to the
logrotate file. (Please refer to the DNSMASQ CONFIG FILE AND COMMAND LINE
PROCESSING section below)

-t, --trace  print information showing how the interrogation of configuration
files and the CL result in the pid and log-facility values to use

-v, --verbose  emits operational status messages

-V, --version  prints version information
DNSMASQ CONFIG FILE AND COMMAND LINE PROCESSING
Three starting rules:-  1 ... Start by looking for and processing, if present,
@sysconfdir@/dnsmasq.conf.
.br
2 ... A config file entry trumps a command line option.
.br
3 ... The first log-facility and pid-file entries are taken as the final value.
No further searching takes place for an already found parameter.
.br

dnsmasq.conf, config-file and config-dir processing  Starting from dnsmasq.conf
mentioned above, the file is scanned for pid-file, log-facility, conf-file and
conf-dir entries. For as long as at least one parameter, (log-facility or
pid-file), has not been found, searches will continue using conf-file and
conf-dir entries until either both parameters are found or new config files are
exhausted.
.br
command line  The dnsmasq daemon command line is also parsed and if it contains
either parameter which has not been discovered in a conf-file, then it is taken
as the final value.
.br

pid last resort  If the pid-file parameter still has not been found then a
search is made for dnnsmasq.pid anywhere under the @runstatedir@ location. If
found this is used as the final version.
.br
If a pid-file is still not found then the actual process id of the running
dnsmasq daemon is used as the final version.

EXIT STATUS
0
if OK,

1
on failure.
AUTHOR
Written by Mark Grant.
REPORTING BUGS
Report bugs to <m.grant.prg@gmail.com>
COPYRIGHT
Copyright 2018 Mark Grant.
.br
License GPLv3+: GNU GPL version 3 or later
.br
<http://gnu.org/licenses/gpl.html>.
.br
This is free software: you are free to change and redistribute it.
.br
There is NO WARRANTY, to the extent permitted by law.
SEE ALSO
dnsmasq(8) logrotate(8)

